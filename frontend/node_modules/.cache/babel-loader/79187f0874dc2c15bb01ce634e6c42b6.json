{"ast":null,"code":"import _defineProperty from\"C:/Users/charl/Documents/Code/Web Dev/Chess-Online/chessproject/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _slicedToArray from\"C:/Users/charl/Documents/Code/Web Dev/Chess-Online/chessproject/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import useWebSocket,{ReadyState}from\"react-use-websocket\";import{useLocation}from\"react-router-dom\";import{GameContainer,GamePlayer,Player,TakenPieces}from\"./GameElements\";import Board from\"../components/Board\";import{checkIfOpponentInCheck,canMovePiece}from\"../components/Game\";import GameOver from\"../components/GameOver\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Chess=function Chess(){var _ReadyState$CONNECTIN;var location=useLocation();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),winner=_useState2[0],setWinner=_useState2[1];var _useState3=useState(location.state.room),_useState4=_slicedToArray(_useState3,1),room=_useState4[0];var _useState5=useState(location.state.name),_useState6=_slicedToArray(_useState5,1),name=_useState6[0];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),opponentName=_useState8[0],setOpponentName=_useState8[1];var _useState9=useState(location.state.colour),_useState10=_slicedToArray(_useState9,2),playerColour=_useState10[0],setPlayerColour=_useState10[1];var _useState11=useState({white:[],black:[]}),_useState12=_slicedToArray(_useState11,2),takenPieces=_useState12[0],setTakenPieces=_useState12[1];var _useState13=useState(location.state.colour===\"white\"?true:false),_useState14=_slicedToArray(_useState13,2),isTurn=_useState14[0],setIsTurn=_useState14[1];/* require(\"../assets/images/pieces/pawn_b.png\"),\r\n    require(\"../assets/images/pieces/queen_b.png\"),\r\n    require(\"../assets/images/pieces/bishop_b.png\"),\r\n    require(\"../assets/images/pieces/king_b.png\"), */var boardRotation=getBoardRotation(playerColour);var isWhite=playerColour===\"white\";// Sets initial piece positions ensuring that players colour is always at bottom\nvar _useState15=useState(initBoardState(isWhite,boardRotation)),_useState16=_slicedToArray(_useState15,2),boardState=_useState16[0],setBoardState=_useState16[1];var _useState17=useState(null),_useState18=_slicedToArray(_useState17,2),prevBoardState=_useState18[0],setPrevBoardState=_useState18[1];var _useState19=useState({check:new Audio(require(\"../assets/sounds/check.mp3\")),move:new Audio(require(\"../assets/sounds/move.mp3\")),capture:new Audio(require(\"../assets/sounds/capture.ogg\")),end:new Audio(require(\"../assets/sounds/game_end.mp3\"))}),_useState20=_slicedToArray(_useState19,1),audio=_useState20[0];var opponentColour=playerColour===\"white\"?\"black\":\"white\";var _useWebSocket=useWebSocket(\"ws://127.0.0.1:8000/ws/\"+room+\"/\",{onOpen:function onOpen(){console.log(\"Connected!\");sendMessage(JSON.stringify({type:\"send_message\",message:{opponentName:name},event:\"START\"}));},onClose:function onClose(){console.log(\"Disconnected!\");},onMessage:function onMessage(e){var dataFromServer=JSON.parse(e.data);switch(dataFromServer.payload.event){case\"START\":if(opponentName===null&&dataFromServer.payload.message.opponentName!==name){setOpponentName(dataFromServer.payload.message.opponentName);sendMessage(JSON.stringify({type:\"send_message\",message:{opponentName:name},event:\"START\"}));}break;case\"END\":if(dataFromServer.payload.message.opponentName!==name){setWinner(dataFromServer.payload.message.opponentName);}break;case\"MOVE\":// Ensure that the message is not from self\nif(dataFromServer.payload.message.opponent&&dataFromServer.payload.message.opponent.colour!==playerColour){var flippedBoard=flipBoard(dataFromServer.payload.message.boardState);// Make sure that the board state has changed\n// Board must be flipped since the opponent sees it from the other side\nif(JSON.stringify(flippedBoard)!==JSON.stringify(boardState)){setBoardState(flippedBoard);setTakenPieces(dataFromServer.payload.message.takenPieces);setOpponentName(dataFromServer.payload.message.opponent.name);}}break;case\"RESTART\":// Reset state and swap colour\nsetWinner(null);setTakenPieces({white:[],black:[]});setPlayerColour(opponentColour);setIsTurn(opponentColour===\"white\");setBoardState(initBoardState(isWhite,boardRotation));break;}}}),sendMessage=_useWebSocket.sendMessage,readyState=_useWebSocket.readyState;var connectionStatus=(_ReadyState$CONNECTIN={},_defineProperty(_ReadyState$CONNECTIN,ReadyState.CONNECTING,\"Connecting\"),_defineProperty(_ReadyState$CONNECTIN,ReadyState.OPEN,\"Open\"),_defineProperty(_ReadyState$CONNECTIN,ReadyState.CLOSING,\"Closing\"),_defineProperty(_ReadyState$CONNECTIN,ReadyState.CLOSED,\"Closed\"),_defineProperty(_ReadyState$CONNECTIN,ReadyState.UNINSTANTIATED,\"Uninstantiated\"),_ReadyState$CONNECTIN)[readyState];var playMoveAudio=function playMoveAudio(){if(prevBoardState===null)return;for(var _i=0,_Object$entries=Object.entries(boardState);_i<_Object$entries.length;_i++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i],1),piece=_Object$entries$_i[0];// Check if any piece has been taken by comparing the new and old board states\nif(boardState[piece].isAlive!==prevBoardState[piece].isAlive){audio.capture.play();return;}}// If no piece has been taken, play the normal move sound\naudio.move.play();};var handleCheckmate=function handleCheckmate(){// Update the kings check state\nvar opponentKing,playerKing;if(boardState[\"king_w\"].isOwner){opponentKing=boardState[\"king_b\"];playerKing=boardState[\"king_w\"];}else{opponentKing=boardState[\"king_w\"];playerKing=boardState[\"king_b\"];}if(checkIfOpponentInCheck(boardState,opponentKing)){audio.check.play();opponentKing.inCheck=true;}else{opponentKing.inCheck=false;}// This state will be updated when on the opponents side and sent to the player\nif(playerKing.inCheck){audio.check.play();}};var checkForGameOver=function checkForGameOver(){for(var y=0;y<8;y++){for(var x=0;x<8;x++){for(var _i2=0,_Object$entries2=Object.entries(boardState);_i2<_Object$entries2.length;_i2++){var _Object$entries2$_i=_slicedToArray(_Object$entries2[_i2],2),piece=_Object$entries2$_i[0],state=_Object$entries2$_i[1];// If a piece can be moved, the game is not over\nif(state.isOwner&&state.isAlive&&canMovePiece(x,y,{pieceName:piece,pieceState:state},boardState))return false;}}}return true;};useEffect(function(){// Send the current board state to the websocket group\n// Only send message if the board state has changed to avoid infintite loop of sending\nplayMoveAudio();handleCheckmate();if(prevBoardState){sendMessage(JSON.stringify({type:\"send_message\",message:{boardState:boardState,takenPieces:takenPieces,opponent:{name:name,colour:playerColour}},event:\"MOVE\"}));// True if there are no possible moves, meaning the opponent won\nif(checkForGameOver()){setWinner(opponentName);// Tell the other player that they won\nsendMessage(JSON.stringify({type:\"send_message\",message:{winner:opponentName,colour:playerColour===\"white\"?\"black\":\"white\"},event:\"END\"}));}}// Swap turns\nsetIsTurn(function(prev){return!prev;});setPrevBoardState(boardState);},[boardState]);var restartGame=function restartGame(){// Tell the group to restart game and switch sides\nsendMessage(JSON.stringify({type:\"send_message\",message:null,event:\"RESTART\"}));};var exitRoom=function exitRoom(){};return/*#__PURE__*/_jsx(GameContainer,{children:/*#__PURE__*/_jsxs(GamePlayer,{children:[/*#__PURE__*/_jsxs(Player,{children:[/*#__PURE__*/_jsx(\"div\",{children:opponentName}),/*#__PURE__*/_jsx(TakenPieces,{children:takenPieces[playerColour].map(function(piecePath,i){return/*#__PURE__*/_jsx(\"img\",{src:piecePath},i);})})]}),/*#__PURE__*/_jsx(Board,{boardState:boardState,setBoardState:setBoardState,setTakenPieces:setTakenPieces,isTurn:isTurn}),/*#__PURE__*/_jsxs(Player,{children:[/*#__PURE__*/_jsx(\"div\",{children:name}),/*#__PURE__*/_jsx(TakenPieces,{children:takenPieces[opponentColour].map(function(piecePath,i){return/*#__PURE__*/_jsx(\"img\",{src:piecePath},i);})})]}),/*#__PURE__*/_jsx(GameOver,{show:winner!==null,winner:winner===name,restartGame:restartGame,exitRoom:exitRoom})]})});};export default Chess;var getBoardRotation=function getBoardRotation(colour){if(colour===\"white\")return{white:[7,6],black:[0,1]};else if(colour===\"black\")return{white:[0,1],black:[7,6]};throw\"Colour must be black or white\";};var flipBoard=function flipBoard(boardState){for(var _i3=0,_Object$entries3=Object.entries(boardState);_i3<_Object$entries3.length;_i3++){var _Object$entries3$_i=_slicedToArray(_Object$entries3[_i3],2),_=_Object$entries3$_i[0],state=_Object$entries3$_i[1];state.row=7-state.row;state.isOwner=!state.isOwner;}return boardState;};export var initBoardState=function initBoardState(isWhite,boardRotation){var pieceNames=[\"castle_w_1\",\"knight_w_1\",\"bishop_w_1\",\"queen_w\",\"king_w\",\"bishop_w_2\",\"knight_w_2\",\"castle_w_2\",\"pawn_w_1\",\"pawn_w_2\",\"pawn_w_3\",\"pawn_w_4\",\"pawn_w_5\",\"pawn_w_6\",\"pawn_w_7\",\"pawn_w_8\",\"castle_b_1\",\"knight_b_1\",\"bishop_b_1\",\"queen_b\",\"king_b\",\"bishop_b_2\",\"knight_b_2\",\"castle_b_2\",\"pawn_b_1\",\"pawn_b_2\",\"pawn_b_3\",\"pawn_b_4\",\"pawn_b_5\",\"pawn_b_6\",\"pawn_b_7\",\"pawn_b_8\"];var boardState={};for(var i=0;i<32;i++){// First 16 elements in  pieces array are white rest are black\n// Each 8 elements in array is a row\nif(i<16){var row=void 0;if(i<8)row=boardRotation.white[0];else row=boardRotation.white[1];var properties={row:row,col:i%8,hasMoved:false,isOwner:isWhite,isAlive:true};if(pieceNames[i]===\"king_w\"||pieceNames[i]===\"king_b\"){properties[\"inCheck\"]=false;}boardState[pieceNames[i]]=properties;}else{var _row=void 0;if(i<24)_row=boardRotation.black[0];else _row=boardRotation.black[1];var _properties={row:_row,col:i%8,hasMoved:false,isOwner:!isWhite,isAlive:true};if(pieceNames[i]===\"king_w\"||pieceNames[i]===\"king_b\"){_properties[\"inCheck\"]=false;}boardState[pieceNames[i]]=_properties;}}return boardState;};","map":{"version":3,"names":["React","useState","useEffect","useWebSocket","ReadyState","useLocation","GameContainer","GamePlayer","Player","TakenPieces","Board","checkIfOpponentInCheck","canMovePiece","GameOver","Chess","location","winner","setWinner","state","room","name","opponentName","setOpponentName","colour","playerColour","setPlayerColour","white","black","takenPieces","setTakenPieces","isTurn","setIsTurn","boardRotation","getBoardRotation","isWhite","initBoardState","boardState","setBoardState","prevBoardState","setPrevBoardState","check","Audio","require","move","capture","end","audio","opponentColour","onOpen","console","log","sendMessage","JSON","stringify","type","message","event","onClose","onMessage","e","dataFromServer","parse","data","payload","opponent","flippedBoard","flipBoard","readyState","connectionStatus","CONNECTING","OPEN","CLOSING","CLOSED","UNINSTANTIATED","playMoveAudio","Object","entries","piece","isAlive","play","handleCheckmate","opponentKing","playerKing","isOwner","inCheck","checkForGameOver","y","x","pieceName","pieceState","prev","restartGame","exitRoom","map","piecePath","i","_","row","pieceNames","properties","col","hasMoved"],"sources":["C:/Users/charl/Documents/Code/Web Dev/Chess-Online/chessproject/frontend/src/pages/Chess.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport useWebSocket, { ReadyState } from \"react-use-websocket\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { GameContainer, GamePlayer, Player, TakenPieces } from \"./GameElements\";\r\nimport Board from \"../components/Board\";\r\nimport { checkIfOpponentInCheck, canMovePiece } from \"../components/Game\";\r\nimport GameOver from \"../components/GameOver\";\r\n\r\nconst Chess = () => {\r\n    const location = useLocation();\r\n\r\n    const [winner, setWinner] = useState(null);\r\n    const [room] = useState(location.state.room);\r\n    const [name] = useState(location.state.name);\r\n    const [opponentName, setOpponentName] = useState(null);\r\n    const [playerColour, setPlayerColour] = useState(location.state.colour);\r\n    const [takenPieces, setTakenPieces] = useState({\r\n        white: [],\r\n        black: [],\r\n    });\r\n    const [isTurn, setIsTurn] = useState(\r\n        location.state.colour === \"white\" ? true : false\r\n    );\r\n\r\n    /* require(\"../assets/images/pieces/pawn_b.png\"),\r\n    require(\"../assets/images/pieces/queen_b.png\"),\r\n    require(\"../assets/images/pieces/bishop_b.png\"),\r\n    require(\"../assets/images/pieces/king_b.png\"), */\r\n\r\n    const boardRotation = getBoardRotation(playerColour);\r\n    const isWhite = playerColour === \"white\";\r\n    // Sets initial piece positions ensuring that players colour is always at bottom\r\n    const [boardState, setBoardState] = useState(\r\n        initBoardState(isWhite, boardRotation)\r\n    );\r\n    const [prevBoardState, setPrevBoardState] = useState(null);\r\n\r\n    const [audio] = useState({\r\n        check: new Audio(require(\"../assets/sounds/check.mp3\")),\r\n        move: new Audio(require(\"../assets/sounds/move.mp3\")),\r\n        capture: new Audio(require(\"../assets/sounds/capture.ogg\")),\r\n        end: new Audio(require(\"../assets/sounds/game_end.mp3\")),\r\n    });\r\n\r\n    const opponentColour = playerColour === \"white\" ? \"black\" : \"white\";\r\n\r\n    const { sendMessage, readyState } = useWebSocket(\r\n        \"ws://127.0.0.1:8000/ws/\" + room + \"/\",\r\n        {\r\n            onOpen: () => {\r\n                console.log(\"Connected!\");\r\n                sendMessage(\r\n                    JSON.stringify({\r\n                        type: \"send_message\",\r\n                        message: { opponentName: name },\r\n                        event: \"START\",\r\n                    })\r\n                );\r\n            },\r\n            onClose: () => {\r\n                console.log(\"Disconnected!\");\r\n            },\r\n            onMessage: (e) => {\r\n                const dataFromServer = JSON.parse(e.data);\r\n                switch (dataFromServer.payload.event) {\r\n                    case \"START\":\r\n                        if (\r\n                            opponentName === null &&\r\n                            dataFromServer.payload.message.opponentName !== name\r\n                        ) {\r\n                            setOpponentName(\r\n                                dataFromServer.payload.message.opponentName\r\n                            );\r\n                            sendMessage(\r\n                                JSON.stringify({\r\n                                    type: \"send_message\",\r\n                                    message: { opponentName: name },\r\n                                    event: \"START\",\r\n                                })\r\n                            );\r\n                        }\r\n                        break;\r\n\r\n                    case \"END\":\r\n                        if (\r\n                            dataFromServer.payload.message.opponentName !== name\r\n                        ) {\r\n                            setWinner(\r\n                                dataFromServer.payload.message.opponentName\r\n                            );\r\n                        }\r\n                        break;\r\n\r\n                    case \"MOVE\":\r\n                        // Ensure that the message is not from self\r\n                        if (\r\n                            dataFromServer.payload.message.opponent &&\r\n                            dataFromServer.payload.message.opponent.colour !==\r\n                                playerColour\r\n                        ) {\r\n                            const flippedBoard = flipBoard(\r\n                                dataFromServer.payload.message.boardState\r\n                            );\r\n                            // Make sure that the board state has changed\r\n                            // Board must be flipped since the opponent sees it from the other side\r\n                            if (\r\n                                JSON.stringify(flippedBoard) !==\r\n                                JSON.stringify(boardState)\r\n                            ) {\r\n                                setBoardState(flippedBoard);\r\n\r\n                                setTakenPieces(\r\n                                    dataFromServer.payload.message.takenPieces\r\n                                );\r\n                                setOpponentName(\r\n                                    dataFromServer.payload.message.opponent.name\r\n                                );\r\n                            }\r\n                        }\r\n                        break;\r\n\r\n                    case \"RESTART\":\r\n                        // Reset state and swap colour\r\n                        setWinner(null);\r\n                        setTakenPieces({\r\n                            white: [],\r\n                            black: [],\r\n                        });\r\n                        setPlayerColour(opponentColour);\r\n                        setIsTurn(opponentColour === \"white\");\r\n\r\n                        setBoardState(initBoardState(isWhite, boardRotation));\r\n                        break;\r\n                }\r\n            },\r\n        }\r\n    );\r\n\r\n    const connectionStatus = {\r\n        [ReadyState.CONNECTING]: \"Connecting\",\r\n        [ReadyState.OPEN]: \"Open\",\r\n        [ReadyState.CLOSING]: \"Closing\",\r\n        [ReadyState.CLOSED]: \"Closed\",\r\n        [ReadyState.UNINSTANTIATED]: \"Uninstantiated\",\r\n    }[readyState];\r\n\r\n    const playMoveAudio = () => {\r\n        if (prevBoardState === null) return;\r\n        for (const [piece] of Object.entries(boardState)) {\r\n            // Check if any piece has been taken by comparing the new and old board states\r\n            if (boardState[piece].isAlive !== prevBoardState[piece].isAlive) {\r\n                audio.capture.play();\r\n                return;\r\n            }\r\n        }\r\n        // If no piece has been taken, play the normal move sound\r\n        audio.move.play();\r\n    };\r\n\r\n    const handleCheckmate = () => {\r\n        // Update the kings check state\r\n        let opponentKing, playerKing;\r\n        if (boardState[\"king_w\"].isOwner) {\r\n            opponentKing = boardState[\"king_b\"];\r\n            playerKing = boardState[\"king_w\"];\r\n        } else {\r\n            opponentKing = boardState[\"king_w\"];\r\n            playerKing = boardState[\"king_b\"];\r\n        }\r\n\r\n        if (checkIfOpponentInCheck(boardState, opponentKing)) {\r\n            audio.check.play();\r\n            opponentKing.inCheck = true;\r\n        } else {\r\n            opponentKing.inCheck = false;\r\n        }\r\n        // This state will be updated when on the opponents side and sent to the player\r\n        if (playerKing.inCheck) {\r\n            audio.check.play();\r\n        }\r\n    };\r\n\r\n    const checkForGameOver = () => {\r\n        for (let y = 0; y < 8; y++) {\r\n            for (let x = 0; x < 8; x++) {\r\n                for (const [piece, state] of Object.entries(boardState)) {\r\n                    // If a piece can be moved, the game is not over\r\n                    if (\r\n                        state.isOwner &&\r\n                        state.isAlive &&\r\n                        canMovePiece(\r\n                            x,\r\n                            y,\r\n                            { pieceName: piece, pieceState: state },\r\n                            boardState\r\n                        )\r\n                    )\r\n                        return false;\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n\r\n    useEffect(() => {\r\n        // Send the current board state to the websocket group\r\n        // Only send message if the board state has changed to avoid infintite loop of sending\r\n        playMoveAudio();\r\n\r\n        handleCheckmate();\r\n\r\n        if (prevBoardState) {\r\n            sendMessage(\r\n                JSON.stringify({\r\n                    type: \"send_message\",\r\n                    message: {\r\n                        boardState,\r\n                        takenPieces,\r\n                        opponent: { name: name, colour: playerColour },\r\n                    },\r\n                    event: \"MOVE\",\r\n                })\r\n            );\r\n\r\n            // True if there are no possible moves, meaning the opponent won\r\n            if (checkForGameOver()) {\r\n                setWinner(opponentName);\r\n\r\n                // Tell the other player that they won\r\n                sendMessage(\r\n                    JSON.stringify({\r\n                        type: \"send_message\",\r\n                        message: {\r\n                            winner: opponentName,\r\n                            colour:\r\n                                playerColour === \"white\" ? \"black\" : \"white\",\r\n                        },\r\n                        event: \"END\",\r\n                    })\r\n                );\r\n            }\r\n        }\r\n\r\n        // Swap turns\r\n        setIsTurn((prev) => !prev);\r\n        setPrevBoardState(boardState);\r\n    }, [boardState]);\r\n\r\n    const restartGame = () => {\r\n        // Tell the group to restart game and switch sides\r\n        sendMessage(\r\n            JSON.stringify({\r\n                type: \"send_message\",\r\n                message: null,\r\n                event: \"RESTART\",\r\n            })\r\n        );\r\n    };\r\n\r\n    const exitRoom = () => {};\r\n\r\n    return (\r\n        <GameContainer>\r\n            <GamePlayer>\r\n                {/* <div style={{ color: \"white\" }}>\r\n                    The WebSocket is currently {connectionStatus}\r\n                </div> */}\r\n                <Player>\r\n                    <div>{opponentName}</div>\r\n                    <TakenPieces>\r\n                        {takenPieces[playerColour].map((piecePath, i) => {\r\n                            return <img key={i} src={piecePath} />;\r\n                        })}\r\n                    </TakenPieces>\r\n                </Player>\r\n                <Board\r\n                    boardState={boardState}\r\n                    setBoardState={setBoardState}\r\n                    setTakenPieces={setTakenPieces}\r\n                    isTurn={isTurn}\r\n                />\r\n                <Player>\r\n                    <div>{name}</div>\r\n                    <TakenPieces>\r\n                        {takenPieces[opponentColour].map((piecePath, i) => {\r\n                            return <img key={i} src={piecePath} />;\r\n                        })}\r\n                    </TakenPieces>\r\n                </Player>\r\n                <GameOver\r\n                    show={winner !== null}\r\n                    winner={winner === name}\r\n                    restartGame={restartGame}\r\n                    exitRoom={exitRoom}\r\n                />\r\n            </GamePlayer>\r\n        </GameContainer>\r\n    );\r\n};\r\n\r\nexport default Chess;\r\n\r\nconst getBoardRotation = (colour) => {\r\n    if (colour === \"white\") return { white: [7, 6], black: [0, 1] };\r\n    else if (colour === \"black\") return { white: [0, 1], black: [7, 6] };\r\n    throw \"Colour must be black or white\";\r\n};\r\n\r\nconst flipBoard = (boardState) => {\r\n    for (const [_, state] of Object.entries(boardState)) {\r\n        state.row = 7 - state.row;\r\n        state.isOwner = !state.isOwner;\r\n    }\r\n    return boardState;\r\n};\r\n\r\nexport const initBoardState = (isWhite, boardRotation) => {\r\n    const pieceNames = [\r\n        \"castle_w_1\",\r\n        \"knight_w_1\",\r\n        \"bishop_w_1\",\r\n        \"queen_w\",\r\n        \"king_w\",\r\n        \"bishop_w_2\",\r\n        \"knight_w_2\",\r\n        \"castle_w_2\",\r\n        \"pawn_w_1\",\r\n        \"pawn_w_2\",\r\n        \"pawn_w_3\",\r\n        \"pawn_w_4\",\r\n        \"pawn_w_5\",\r\n        \"pawn_w_6\",\r\n        \"pawn_w_7\",\r\n        \"pawn_w_8\",\r\n        \"castle_b_1\",\r\n        \"knight_b_1\",\r\n        \"bishop_b_1\",\r\n        \"queen_b\",\r\n        \"king_b\",\r\n        \"bishop_b_2\",\r\n        \"knight_b_2\",\r\n        \"castle_b_2\",\r\n        \"pawn_b_1\",\r\n        \"pawn_b_2\",\r\n        \"pawn_b_3\",\r\n        \"pawn_b_4\",\r\n        \"pawn_b_5\",\r\n        \"pawn_b_6\",\r\n        \"pawn_b_7\",\r\n        \"pawn_b_8\",\r\n    ];\r\n    const boardState = {};\r\n    for (let i = 0; i < 32; i++) {\r\n        // First 16 elements in  pieces array are white rest are black\r\n        // Each 8 elements in array is a row\r\n        if (i < 16) {\r\n            let row;\r\n            if (i < 8) row = boardRotation.white[0];\r\n            else row = boardRotation.white[1];\r\n            const properties = {\r\n                row: row,\r\n                col: i % 8,\r\n                hasMoved: false,\r\n                isOwner: isWhite,\r\n                isAlive: true,\r\n            };\r\n            if (pieceNames[i] === \"king_w\" || pieceNames[i] === \"king_b\") {\r\n                properties[\"inCheck\"] = false;\r\n            }\r\n            boardState[pieceNames[i]] = properties;\r\n        } else {\r\n            let row;\r\n            if (i < 24) row = boardRotation.black[0];\r\n            else row = boardRotation.black[1];\r\n            const properties = {\r\n                row: row,\r\n                col: i % 8,\r\n                hasMoved: false,\r\n                isOwner: !isWhite,\r\n                isAlive: true,\r\n            };\r\n            if (pieceNames[i] === \"king_w\" || pieceNames[i] === \"king_b\") {\r\n                properties[\"inCheck\"] = false;\r\n            }\r\n            boardState[pieceNames[i]] = properties;\r\n        }\r\n    }\r\n    return boardState;\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}