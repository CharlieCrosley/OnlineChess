{"ast":null,"code":"export function movePiece(toX, toY, posHandler, item, boardState, pieceName, pieceState) {\n  //console.log([item.pieceName, item.pieceState]);\n  console.log(item.pieceName);\n  console.log(pieceName);\n  const square = squareIsEmpty(toX, toY, boardState); //console.log(square);\n\n  if (!item.pieceState.isAlive) return;\n  /*  if (item.pieceName !== pieceName) {\r\n      item.pieceName = pieceName;\r\n      item.pieceState = pieceState;\r\n  } */\n  //const square = squareIsEmpty(toX, toY, boardState);\n\n  if (square != null) {\n    if (!square.isOwner) {\n      //square.state.isAlive = false;\n      boardState[square.piece].isAlive = false; //setAlive(false);\n    }\n  } //console.log(boardState);\n  //console.log(square);\n\n\n  posHandler(prevState => ({ ...prevState,\n    [item.pieceName]: {\n      row: toY,\n      col: toX,\n      hasMoved: true,\n      isOwner: true,\n      isAlive: true\n    },\n    [pieceName]: {\n      row: toY,\n      col: toX,\n      hasMoved: true,\n      isOwner: false,\n      isAlive: false\n    }\n  }));\n}\nexport function canMovePiece(toX, toY, item, boardState) {\n  const dx = toX - item.pieceState.col;\n  const dy = toY - item.pieceState.row;\n  const pieceName = item.pieceName.split(\"_\")[0];\n\n  switch (pieceName) {\n    case \"castle\":\n      return Math.abs(dx) === 0 && Math.abs(dy) > 0 || Math.abs(dx) > 0 && Math.abs(dy) === 0;\n\n    case \"knight\":\n      return Math.abs(dx) === 2 && Math.abs(dy) === 1 || Math.abs(dx) === 1 && Math.abs(dy) === 2;\n\n    case \"bishop\":\n      return !(Math.abs(dx) === 0 && Math.abs(dy) > 0) && !(Math.abs(dx) > 0 && Math.abs(dy) === 0) && (Math.abs(dx) === Math.abs(dy) || Math.abs(dx) === Math.abs(dy));\n\n    case \"queen\":\n      return Math.abs(dx) === 0 && Math.abs(dy) > 0 || Math.abs(dx) > 0 && Math.abs(dy) === 0 || Math.abs(dx) === Math.abs(dy) || Math.abs(dx) === Math.abs(dy);\n\n    case \"king\":\n      return (Math.abs(dx) === 1 || Math.abs(dx) === 0) && (Math.abs(dy) === 1 || Math.abs(dy) === 0);\n\n    case \"pawn\":\n      if (!item.pieceState.hasMoved) // Negative direction moves up the board (player always at bottom)\n        return Math.abs(dx) === 0 && (dy === -1 || dy === -2);\n      return dx === 0 && dy === -1;\n\n    default:\n      break;\n  }\n}\n\nfunction squareIsEmpty(x, y, boardState) {\n  for (const [piece, state] of Object.entries(boardState)) {\n    if (x === state.col && y === state.row) {\n      return {\n        piece,\n        state\n      };\n    }\n  }\n\n  return null;\n}","map":{"version":3,"names":["movePiece","toX","toY","posHandler","item","boardState","pieceName","pieceState","console","log","square","squareIsEmpty","isAlive","isOwner","piece","prevState","row","col","hasMoved","canMovePiece","dx","dy","split","Math","abs","x","y","state","Object","entries"],"sources":["C:/Users/charl/Documents/Code/Web Dev/Chess-Online/chessproject/frontend/src/components/Game.js"],"sourcesContent":["export function movePiece(\r\n    toX,\r\n    toY,\r\n    posHandler,\r\n    item,\r\n    boardState,\r\n    pieceName,\r\n    pieceState\r\n) {\r\n    //console.log([item.pieceName, item.pieceState]);\r\n    console.log(item.pieceName);\r\n    console.log(pieceName);\r\n\r\n    const square = squareIsEmpty(toX, toY, boardState);\r\n    //console.log(square);\r\n    if (!item.pieceState.isAlive) return;\r\n\r\n    /*  if (item.pieceName !== pieceName) {\r\n        item.pieceName = pieceName;\r\n        item.pieceState = pieceState;\r\n    } */\r\n\r\n    //const square = squareIsEmpty(toX, toY, boardState);\r\n    if (square != null) {\r\n        if (!square.isOwner) {\r\n            //square.state.isAlive = false;\r\n            boardState[square.piece].isAlive = false;\r\n            //setAlive(false);\r\n        }\r\n    }\r\n    //console.log(boardState);\r\n    //console.log(square);\r\n\r\n    posHandler((prevState) => ({\r\n        ...prevState,\r\n        [item.pieceName]: {\r\n            row: toY,\r\n            col: toX,\r\n            hasMoved: true,\r\n            isOwner: true,\r\n            isAlive: true,\r\n        },\r\n        [pieceName]: {\r\n            row: toY,\r\n            col: toX,\r\n            hasMoved: true,\r\n            isOwner: false,\r\n            isAlive: false,\r\n        },\r\n    }));\r\n}\r\n\r\nexport function canMovePiece(toX, toY, item, boardState) {\r\n    const dx = toX - item.pieceState.col;\r\n    const dy = toY - item.pieceState.row;\r\n\r\n    const pieceName = item.pieceName.split(\"_\")[0];\r\n\r\n    switch (pieceName) {\r\n        case \"castle\":\r\n            return (\r\n                (Math.abs(dx) === 0 && Math.abs(dy) > 0) ||\r\n                (Math.abs(dx) > 0 && Math.abs(dy) === 0)\r\n            );\r\n\r\n        case \"knight\":\r\n            return (\r\n                (Math.abs(dx) === 2 && Math.abs(dy) === 1) ||\r\n                (Math.abs(dx) === 1 && Math.abs(dy) === 2)\r\n            );\r\n\r\n        case \"bishop\":\r\n            return (\r\n                !(Math.abs(dx) === 0 && Math.abs(dy) > 0) &&\r\n                !(Math.abs(dx) > 0 && Math.abs(dy) === 0) &&\r\n                (Math.abs(dx) === Math.abs(dy) || Math.abs(dx) === Math.abs(dy))\r\n            );\r\n\r\n        case \"queen\":\r\n            return (\r\n                (Math.abs(dx) === 0 && Math.abs(dy) > 0) ||\r\n                (Math.abs(dx) > 0 && Math.abs(dy) === 0) ||\r\n                Math.abs(dx) === Math.abs(dy) ||\r\n                Math.abs(dx) === Math.abs(dy)\r\n            );\r\n\r\n        case \"king\":\r\n            return (\r\n                (Math.abs(dx) === 1 || Math.abs(dx) === 0) &&\r\n                (Math.abs(dy) === 1 || Math.abs(dy) === 0)\r\n            );\r\n\r\n        case \"pawn\":\r\n            if (!item.pieceState.hasMoved)\r\n                // Negative direction moves up the board (player always at bottom)\r\n                return Math.abs(dx) === 0 && (dy === -1 || dy === -2);\r\n            return dx === 0 && dy === -1;\r\n\r\n        default:\r\n            break;\r\n    }\r\n}\r\n\r\nfunction squareIsEmpty(x, y, boardState) {\r\n    for (const [piece, state] of Object.entries(boardState)) {\r\n        if (x === state.col && y === state.row) {\r\n            return { piece, state };\r\n        }\r\n    }\r\n    return null;\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}