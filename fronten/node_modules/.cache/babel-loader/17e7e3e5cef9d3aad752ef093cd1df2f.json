{"ast":null,"code":"export function movePiece(toX, toY, posHandler, item) {\n  posHandler(prevState => ({ ...prevState,\n    [item.pieceName]: {\n      row: toY,\n      col: toX,\n      hasMoved: true,\n      isOwner: true\n    }\n  }));\n}\nexport function canMovePiece(toX, toY, item, boardState) {\n  const dx = toX - item.pieceState.col;\n  const dy = toY - item.pieceState.row;\n  const pieceName = item.pieceName.split(\"_\")[0];\n\n  if (squareIsEmpty(toX, toY, boardState) != null) {}\n\n  switch (pieceName) {\n    case \"castle\":\n      return Math.abs(dx) === 0 && Math.abs(dy) > 0 || Math.abs(dx) > 0 && Math.abs(dy) === 0;\n\n    case \"knight\":\n      return Math.abs(dx) === 2 && Math.abs(dy) === 1 || Math.abs(dx) === 1 && Math.abs(dy) === 2;\n\n    case \"bishop\":\n      return !(Math.abs(dx) === 0 && Math.abs(dy) > 0) && !(Math.abs(dx) > 0 && Math.abs(dy) === 0) && (Math.abs(dx) === Math.abs(dy) || Math.abs(dx) === Math.abs(dy));\n\n    case \"queen\":\n      return Math.abs(dx) === 0 && Math.abs(dy) > 0 || Math.abs(dx) > 0 && Math.abs(dy) === 0 || Math.abs(dx) === Math.abs(dy) || Math.abs(dx) === Math.abs(dy);\n\n    case \"king\":\n      return (Math.abs(dx) === 1 || Math.abs(dx) === 0) && (Math.abs(dy) === 1 || Math.abs(dy) === 0);\n\n    case \"pawn\":\n      if (!item.pieceState.hasMoved) // Negative direction moves up the board (player always at bottom)\n        return Math.abs(dx) === 0 && (dy === -1 || dy === -2);\n      return dx === 0 && dy === -1;\n\n    default:\n      break;\n  }\n}\n\nfunction squareIsEmpty(x, y, boardState) {\n  for (const [piece, state] of Object.entries(boardState)) {\n    if (x === state.col && y === state.row) {\n      return [piece, state];\n    }\n  }\n}","map":{"version":3,"names":["movePiece","toX","toY","posHandler","item","prevState","pieceName","row","col","hasMoved","isOwner","canMovePiece","boardState","dx","pieceState","dy","split","squareIsEmpty","Math","abs","x","y","piece","state","Object","entries"],"sources":["C:/Users/charl/Documents/Code/Web Dev/Chess-Online/chessproject/frontend/src/components/Game.js"],"sourcesContent":["export function movePiece(toX, toY, posHandler, item) {\r\n    posHandler((prevState) => ({\r\n        ...prevState,\r\n        [item.pieceName]: { row: toY, col: toX, hasMoved: true, isOwner: true },\r\n    }));\r\n}\r\n\r\nexport function canMovePiece(toX, toY, item, boardState) {\r\n    const dx = toX - item.pieceState.col;\r\n    const dy = toY - item.pieceState.row;\r\n\r\n    const pieceName = item.pieceName.split(\"_\")[0];\r\n\r\n    if (squareIsEmpty(toX, toY, boardState) != null) {\r\n    }\r\n\r\n    switch (pieceName) {\r\n        case \"castle\":\r\n            return (\r\n                (Math.abs(dx) === 0 && Math.abs(dy) > 0) ||\r\n                (Math.abs(dx) > 0 && Math.abs(dy) === 0)\r\n            );\r\n\r\n        case \"knight\":\r\n            return (\r\n                (Math.abs(dx) === 2 && Math.abs(dy) === 1) ||\r\n                (Math.abs(dx) === 1 && Math.abs(dy) === 2)\r\n            );\r\n\r\n        case \"bishop\":\r\n            return (\r\n                !(Math.abs(dx) === 0 && Math.abs(dy) > 0) &&\r\n                !(Math.abs(dx) > 0 && Math.abs(dy) === 0) &&\r\n                (Math.abs(dx) === Math.abs(dy) || Math.abs(dx) === Math.abs(dy))\r\n            );\r\n\r\n        case \"queen\":\r\n            return (\r\n                (Math.abs(dx) === 0 && Math.abs(dy) > 0) ||\r\n                (Math.abs(dx) > 0 && Math.abs(dy) === 0) ||\r\n                Math.abs(dx) === Math.abs(dy) ||\r\n                Math.abs(dx) === Math.abs(dy)\r\n            );\r\n\r\n        case \"king\":\r\n            return (\r\n                (Math.abs(dx) === 1 || Math.abs(dx) === 0) &&\r\n                (Math.abs(dy) === 1 || Math.abs(dy) === 0)\r\n            );\r\n\r\n        case \"pawn\":\r\n            if (!item.pieceState.hasMoved)\r\n                // Negative direction moves up the board (player always at bottom)\r\n                return Math.abs(dx) === 0 && (dy === -1 || dy === -2);\r\n            return dx === 0 && dy === -1;\r\n\r\n        default:\r\n            break;\r\n    }\r\n}\r\n\r\nfunction squareIsEmpty(x, y, boardState) {\r\n    for (const [piece, state] of Object.entries(boardState)) {\r\n        if (x === state.col && y === state.row) {\r\n            return [piece, state];\r\n        }\r\n    }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}